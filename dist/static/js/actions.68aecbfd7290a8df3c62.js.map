{"version":3,"sources":["webpack:///./src/api/_util.js","webpack:///./src/api/login.js","webpack:///./src/views/show/store/actions.js"],"names":["apiRoot","arguments","length","undefined","obj","_axios_0_18_0_axios_default","a","create","baseURL","timeout","headers","content-type","interceptors","request","use","config","err","promise_default","reject","response","res","data","original","status","Error","msg","error","axios","post","Object","__WEBPACK_IMPORTED_MODULE_0__util__","actions","init","_ref","payload","_this","this","commit","dispatch","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","mark","_callee","token","dataList","baseInfo","wrap","_context","prev","next","name","__WEBPACK_IMPORTED_MODULE_3_component_cookie___default","__WEBPACK_IMPORTED_MODULE_2__api_login__","sent","stop","__webpack_exports__"],"mappings":"gHAwBA,WAAiC,IAAfA,EAAeC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,IAEtBG,KAmCJ,OAjCEA,EAAMC,EAAAC,EAAMC,QACVC,QAASR,EACTS,QAAS,IAETC,SAAUC,eAAgB,wCAG1BC,aAAaC,QAAQC,IAAI,SAAAC,GAC3B,OAAOA,GACN,SAAAC,GACD,OAAOC,EAAAX,EAAQY,OAAOF,KAGxBZ,EAAIQ,aAAaO,SAASL,IAAI,SAAAM,GAI5B,GAAIA,EAAIC,MACHD,EAAIC,KAAKC,UACTF,EAAIC,KAAKC,SAASC,QACU,QAA5BH,EAAIC,KAAKC,SAASC,OAErB,MAAM,IAAIC,MAAMJ,EAAIC,KAAKC,SAASG,KAGpC,OAAOL,EAAIC,MACV,SAAAL,GAED,IAAIU,EAAQV,EACZ,OAAOC,EAAAX,EAAQY,OAAOQ,KAIjBtB,0CCvDF,SAAqBiB,GAC1B,OAAOM,EAAMC,KAAN,iCAA6CP,QAI/C,SAAgBA,GACrB,OAAOM,EAAMC,KAAN,uBAAmCP,oBAVtCM,EAAQE,OAAAC,EAAA,EAAAD,CAAQ,uLCChBE,GAEEC,KAFQ,SAAAC,EAEkBC,GAAS,IAAAC,EAAAC,KAAlBC,GAAkBJ,EAA5BK,SAA4BL,EAAlBI,QAAkB,OAAAE,IAAAC,EAAAlC,EAAAmC,KAAA,SAAAC,IAAA,IAAAC,EAAAtB,EAAAuB,EAAAC,EAAA,OAAAL,EAAAlC,EAAAwC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAE1Bf,EAAQgB,OACfP,EAAQQ,IAAO,iBAHkB,CAAAJ,EAAAE,KAAA,eAS/B5B,GACJsB,MAAOA,GAV4BI,EAAAE,KAAA,EAadpB,OAAAuB,EAAA,EAAAvB,CAAMR,GAbQ,OAa/BuB,EAb+BG,EAAAM,KAgB/BR,EAAWD,EAAStB,SAASD,KAAK,IAAM,GAE9CgB,EAAO,cAAeQ,GAlBe,wBAAAE,EAAAO,SAAAZ,EAAAP,KAAAI,KA2B3CgB,EAAA","file":"static/js/actions.68aecbfd7290a8df3c62.js","sourcesContent":["import axios from 'axios'\nimport cookie from 'component-cookie'\nimport gateway from '../_gateway.config'\n\n// function getBaseUrl (apiRoot) {\n//   if (~apiRoot.indexOf('_account')) {\n//     return apiRoot.replace('_account', account)\n//   }\n//   if (~apiRoot.indexOf('_course')) {\n//     return apiRoot.replace('_course', course)\n//   }\n//   if (~apiRoot.indexOf('_teacher')) {\n//     return apiRoot.replace('_teacher', teacher)\n//   }\n//   if (~apiRoot.indexOf('_signalling')) {\n//     return apiRoot.replace('_signalling', signalling)\n//   }\n//   if (~apiRoot.indexOf('_link')) {\n//     return apiRoot.replace('_link', link)\n//   }\n//   return `${account}/api${apiRoot}`\n// }\n\nexport\nfunction callApi (apiRoot = '/') {\n\n  var obj = {}\n    // var token = cookie('abc-token') || decodeURIComponent(getQueryString('authToken'))\n    obj = axios.create({\n      baseURL: apiRoot,\n      timeout: 10000,\n      // headers: { 'Authorization': token }\n      headers: {'content-type': 'application/x-www-form-urlencoded'}\n    })\n\n  obj.interceptors.request.use(config => {\n    return config\n  }, err => {\n    return Promise.reject(err)\n  })\n\n  obj.interceptors.response.use(res => {\n    // console.log(res)\n\n    // 如果请求有误抛出异常\n    if (res.data\n      && res.data.original\n      && res.data.original.status\n      && res.data.original.status == 'fail') {\n\n      throw new Error(res.data.original.msg);\n    }\n\n    return res.data\n  }, err => {\n\n    let error = err\n    return Promise.reject(error)\n\n  })\n\n  return obj\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/_util.js","import { callApi } from './_util'\n\nconst axios = callApi('https://tpdoc.cn')\n// const axios = callApi('http://127.0.0.1/work-myProject/topay_api_new')\n\n// 用户注册接口\nexport function upBaseInfo (data) {\n  return axios.post(`/api/person_page/add_base_info`, data)\n}\n\n// 用户登录接口\nexport function login (data) {\n  return axios.post(`/account/personLogin`, data)\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/login.js","import { login } from '../../../api/login'\nimport cookie from 'component-cookie'\n\nconst actions = {\n  // 获取用户基本信息\n  async init ({dispatch, commit}, payload) {\n\n    const path = payload.name\n    const token = cookie('person-token')\n\n    // console.log(path)\n    // console.log(token)\n\n    if (token) {\n      const data = {\n        token: token\n      }\n\n      const dataList = await login(data)\n\n      // 用户基本信息\n      const baseInfo = dataList.original.data[0] || ''\n\n      commit('setBaseInfo', baseInfo)\n\n    }\n\n  }\n\n}\n\n\nexport default actions\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/show/store/actions.js"],"sourceRoot":""}